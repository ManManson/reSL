from cpp_writer import CPPWriter

import struct

# 1d7d:2402 - 216 bytes
data = b'\x05\xff\x00\x00\x00\x00\x00\xff\x00\x00\x01\x00\x04\xff\xff\x00\x01\x00\x03\x01\xff\x01\x01\x00\x00\x01\x00\x01\x00\x00\x02\x01\x00\x01\x00\x00\x02\xff\xff\x00\x01\x00\x01\x00\xff\x00\x01\x00\x05\x00\xff\x00\x01\x00\x03\xff\x01\x01\x00\x00\x01\x00\x01\x01\x00\x00\x04\x00\x01\x01\x00\x00\x05\xff\x00\x00\x00\x00\x00\xff\x00\x00\x01\x00\x04\xff\xff\x00\x01\x00\x03\x00\x01\x01\x00\x00\x01\x01\x01\x01\x00\x00\x04\x01\x01\x01\x00\x00\x02\x00\xff\x00\x01\x00\x01\x01\xff\x00\x01\x00\x05\x01\xff\x00\x01\x00\x05\xff\x01\x01\x00\x00\x00\xff\x01\x01\x01\x00\x04\xff\x00\x01\x01\x00\x03\x01\x00\x01\x01\x00\x00\x01\x01\x01\x00\x00\x02\x01\x01\x01\x00\x00\x02\xff\xff\x00\x01\x00\x01\x00\xff\x00\x01\x00\x05\x00\xff\x00\x01\x00\x03\xff\x01\x01\x00\x00\x01\x00\x01\x01\x00\x00\x04\x00\x01\x01\x00\x00\x02\x01\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x03\x01\xff\x00\x01\x00'

with CPPWriter('rail_info.cpp') as w:
    w.writeln('#include "rail_info.h"')
    w.writeln()
    w.writeln('namespace resl {')
    w.writeln()

    w.writeln('/* 1d7d:2402 - 216 bytes */')
    w.writeln('RailInfo x_railInfo[6][6] = {')
    with w.indent():
        for x in range(6):
            w.writeln('{ // %d' % x)
            with w.indent():
                for y in range(6):
                    # b - int8_t
                    # B - uint8_t
                    railType, tileDX, tileDY, _type1, _type2, unknown1 = struct.unpack('<BbbBBB', data[:6])
                    w.writeln('{ %d, %d, %d, %d, %d, %d },' % (railType, tileDX, tileDY, _type1, _type2, unknown1))
                    data = data[6:]
            w.writeln('}' if x == 5 else '},')
    w.writeln('};')
            
    w.writeln()
    w.writeln('} // namespace resl')
