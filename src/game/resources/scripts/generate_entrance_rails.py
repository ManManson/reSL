import struct

from cpp_writer import CPPWriter

# 1d4b:0000 : 276 bytes
DATA = b'\x00\x04\x01\x00\x00\x00\x00\x01\x04\x01\x00\x00\x00\x04\x01\x05' \
       b'\x00\x00\x00\x01\x04\x05\x00\x00\x00\x01\x04\x03\x00\x00\x00\x04' \
       b'\x01\x03\x00\x00\x00\x01\x05\x00\x00\x00\x00\x05\x01\x01\x00\x00' \
       b'\x00\x05\x02\x00\x00\x00\x00\x02\x05\x01\x00\x00\x00\x05\x02\x05' \
       b'\x00\x00\x00\x02\x05\x05\x00\x00\x00\x05\x02\x03\x00\x00\x00\x02' \
       b'\x05\x03\x00\x00\x00\x06\x02\x01\x00\x00\x00\x02\x06\x00\x00\x00' \
       b'\x00\x06\x03\x00\x00\x00\x00\x03\x06\x01\x00\x00\x00\x06\x03\x05' \
       b'\x00\x00\x00\x03\x06\x05\x00\x00\x00\x06\x03\x03\x00\x00\x00\x03' \
       b'\x06\x03\x00\x00\x00\x03\x07\x00\x00\x00\x00\x07\x03\x01\x00\x00' \
       b'\x00\x04\x07\x01\x00\x00\x00\x07\x04\x00\x00\x00\x00\x04\x07\x05' \
       b'\x00\x00\x00\x07\x04\x05\x00\x00\x00\x04\x07\x03\x00\x00\x00\x07' \
       b'\x04\x03\x00\x00\x00\x08\x04\x01\x00\x00\x00\x04\x08\x00\x00\x00' \
       b'\x00\x05\x08\x01\x00\x00\x00\x08\x05\x00\x00\x00\x00\x05\x08\x05' \
       b'\x00\x00\x00\x08\x05\x05\x00\x00\x00\x08\x05\x03\x00\x00\x00\x05' \
       b'\x08\x03\x00\x00\x00\x09\x05\x01\x00\x00\x00\x05\x09\x00\x00\x00' \
       b'\x00\x06\x09\x01\x00\x00\x00\x09\x06\x00\x00\x00\x00\x06\x09\x05' \
       b'\x00\x00\x00\x09\x06\x05\x00\x00\x00\x09\x06\x03\x00\x00\x00\x06' \
       b'\x09\x03\x00\x00'

with CPPWriter('entrance_rails.cpp') as w:
    w.writeln('#include "entrance_rails.h"')
    w.writeln()
    w.writeln('#include <game/rail_info.h>')
    w.writeln()
    w.writeln('namespace resl {')
    w.writeln()
    w.writeln('/* 1d4b:0000 : 276 bytes */')
    w.writeln('const RailInfo g_entranceRails[46] = {')
    with w.indent():
        for i in range(46):
            values = struct.unpack('<BBBBB', DATA[:5])
            w.writeln('{ %d, %d, %d, %d, %d },' % values)
            DATA = DATA[6:]
    assert len(DATA) == 0
    w.writeln('};')
    w.writeln()
    w.writeln('} // namespace resl')
